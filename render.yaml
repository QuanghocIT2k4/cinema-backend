# Render Blueprint Configuration
# File này giúp Render tự động setup service khi bạn connect GitHub repo

services:
  - type: web
    name: cinema-backend-api
    runtime: java
    plan: free  # Hoặc starter/standard nếu muốn
    buildCommand: ./mvnw clean package -DskipTests
    startCommand: java -jar target/cinema-backend-*.jar --spring.profiles.active=production
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: production
      - key: PORT
        fromService:
          type: web
          name: cinema-backend-api
          property: port
      - key: DB_HOST
        sync: false  # Bạn sẽ set thủ công sau khi tạo MySQL database
      - key: DB_PORT
        value: "3306"
      - key: DB_NAME
        sync: false
      - key: DB_USERNAME
        sync: false
      - key: DB_PASSWORD
        sync: false
      - key: JWT_SECRET
        generateValue: true  # Render tự generate secret
      - key: JWT_EXPIRATION_MS
        value: "86400000"
      - key: ALLOWED_ORIGINS
        sync: false  # Set sau khi có URL Vercel

databases:
  - name: cinema-db
    plan: free  # MySQL free tier
    databaseName: cinema_db

